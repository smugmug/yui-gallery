YUI.add("gallery-sm-editor-link",function(e,t){(function(){var t=e.Editor.DOM,n=e.Base.create("editorLink",e.Base,[],{linkKeyCommands:{"ctrl+h":{fn:"_linkPrompt",allowDefault:!1}},linkTemplate:'<a href="{href}" target="{target}"></a>',initializer:function(){},link:function(e){return this.command(this._link,e)},isLink:function(){return!!this._getAnchorNode()},unlink:function(){var e=this._getAnchorNode(),n;return e&&(n=t.unwrap(e),this.selection.select(n.shrink({trim:!0}))),this},_getAnchorNode:function(){this.focus();var e=this.selection.range().shrink().parentNode();return t.getAncestorElement(e,"a")},_link:function(n){var r=this.selection.range(),i;if(!r)return;this.isLink()&&(r=this.unlink().selection.range()),n||(n={}),n.target||(n.target="_self"),n.href||(n.href=""),r.expand(this._inputNode),i=e.Lang.sub(this.linkTemplate,n),i=r.wrap(i);if(n.text&&n.text!==r.toString()){var s=i.get("firstChild");t.isInlineElement(s)?(s.set("text",n.text),i.setHTML(s)):i.set("text",n.text)}return r.endNode(i,"after"),this.selection.select(r.collapse()),this},_linkPrompt:function(){var t=e.config.win.prompt("Enter a url");t&&this.link({href:t})}});e.namespace("Editor").Link=n})()},"@VERSION@",{requires:["gallery-sm-editor-base","gallery-sm-editor-dom"]});
